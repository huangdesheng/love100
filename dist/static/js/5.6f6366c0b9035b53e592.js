webpackJsonp([5],{"/zhU":function(t,e){},"9jY9":function(t,e,a){"use strict";var i,s=a("xd7I");i=!1,s.a.directive("intervalclick",function(t,e){t.onclick=function(t){if(!i)if(i=!i,e.value){var a=e.value.func,s=e.value.time;if("number"==typeof s){var n=[];for(var r in e.value)if(e.value.hasOwnProperty(r)){if("func"===r||"time"===r)continue;n.push(e.value[r])}setTimeout(function(){i=!i},s),a.apply(void 0,n)}else alert("传入等待时间错误")}else alert("未传入Value数据！")}})},BVUs:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("lC5x"),s=a.n(i),n=a("J0Oq"),r=a.n(n),o=a("pa6O"),c=a("gyMJ"),l=(a("w3CS"),a("cfGD")),u=a("telf"),d=a("YvwL"),v=(a("CtzY"),a("cnSu")),m=a("bjyp"),p=(a("9jY9"),{data:function(){return{item:{name:"",cardId:"",age:"",sex:"请选择性别",sexName:"根据身份证识性别",classNumber:"",region:"请选择地址",address:"",photo:"",family:"",learn:"",grade:"",photos:[{type:1,urls:[]},{type:2,urls:[]},{type:3,urls:[]}]},selectGrade:!1,areaStatus:!1,deteleStatus:!0,auditStatus:void 0,positivePic:"",againstPic:"",learnPic:"",familyPic:"",check_status:!1,areaList:u.a,warning:a("QcOD")}},components:{gradeName:o.a},mixins:[l.a,d.a,m.a,v.a],mounted:function(){var t=this.$route.query.status;if(void 0==t);else{var e=this.$route.query.recipientsId;this.myLaunchPtPer(e,t)}},methods:{myLaunchPtPer:function(t,e){var a=this;return r()(s.a.mark(function e(){var i,n,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.myLaunchPtPer(t);case 2:i=e.sent,a.photoStatus=!0,a.positivePicState=!0,a.againstPicState=!0,200===i.code&&(a.item=i.data,a.item.sexName=1===i.data.sex?"男":"女",a.positivePic=i.data.photos.filter(function(t){return 1==t.type})[0].urls[0],a.againstPic=i.data.photos.filter(function(t){return 1==t.type})[0].urls[1],0==(n=i.data.photos.filter(function(t){return 3==t.type})).length?(a.stydyPicMore=[],a.studyPic=[],a.item.photos.push({type:3,urls:[]})):(a.studyPic=n[0].urls,a.stydyPicMore=n[0].urls),0==(r=i.data.photos.filter(function(t){return 2==t.type})).length?(a.familyPicMore=[],a.morePic=[],a.item.photos.push({type:2,urls:[]})):(a.morePic=r[0].urls,a.familyPicMore=r[0].urls));case 7:case"end":return e.stop()}},e,a)}))()},fileClick:function(t){if(this.loadingStatus)return!1;document.getElementById("file").click()},tirggerFile:function(t){if(this.loadingStatus)return!1;this.moreUploadImg(t,3)},studyfileClick:function(t){if(this.studyloadingStatus)return!1;document.getElementById("studyfile").click()},studyTirggerFile:function(t){if(this.studyloadingStatus)return!1;this.moreUploadImg(t,4)},deletePic:function(t){this.DeletePic(t)},DeletePic:function(t){var e=this;return r()(s.a.mark(function a(){return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,c.a.deletePic({obj:t.photoUrl});case 2:200===a.sent.code&&(1===t.familyStatus?(e.familyPicMore.splice(t.index,1),e.morePic.splice(t.index,1),e.familyPicMore.length<=2&&(e.familyLength=[])):2===t.familyStatus&&(e.stydyPicMore.splice(t.index,1),e.studyPic.splice(t.index,1),(e.stydyPicMore.length<=2||""===e.stydyPicMore)&&(e.studyLength=[])));case 4:case"end":return a.stop()}},a,e)}))()},dataClick:function(){this.testIdCard()},testIdCard:function(){var t=this;return r()(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==t.item.photo){e.next=3;break}return t.$toast("请上传头像"),e.abrupt("return",!1);case 3:if(!(t.item.age<6||t.item.age>18)){e.next=6;break}return t.$toast("年龄不在合理范围内"),e.abrupt("return",!1);case 6:if("男"==t.item.sexName?t.item.sex=1:"女"==t.item.sexName&&(t.item.sex=2),""!==t.item.classNumber){e.next=10;break}return t.$toast("请选择年级"),e.abrupt("return",!1);case 10:if(""!==t.item.address){e.next=13;break}return t.$toast("请正确填写详细地址"),e.abrupt("return",!1);case 13:if("请选择地址"!==t.item.SSX){e.next=16;break}return t.$toast("请正确填写地址"),e.abrupt("return",!1);case 16:if(!(t.item.photos[0].urls.length<2||null==t.item.photos[0].urls[1]||null==t.item.photos[0].urls[0])){e.next=19;break}return t.$toast("请上传身份证图片"),e.abrupt("return",!1);case 19:2==t.$route.query.status?t.updataPersonalInfo(t.item):t.uploadPersonalInfo(t.item);case 20:case"end":return e.stop()}},e,t)}))()},uploadPersonalInfo:function(t){var e=this;return r()(s.a.mark(function a(){var i;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,c.a.personApply(t);case 2:200===(i=a.sent).code?e.$dialog.confirm({message:i.data.msg,confirmButtonText:"确定",confirmButtonColor:"#40D0B3",showCancelButton:!1}).then(function(){e.$router.replace({path:"/personalCenter/myLaunch",query:{active:1}})}):e.$dialog.alert({message:i.message});case 4:case"end":return a.stop()}},a,e)}))()},updataPersonalInfo:function(t){var e=this;return r()(s.a.mark(function a(){var i;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,c.a.updataPersonApply(t);case 2:200===(i=a.sent).code?e.$dialog.confirm({message:i.data.msg,confirmButtonText:"确定",confirmButtonColor:"#40D0B3",showCancelButton:!1}).then(function(){e.$router.replace({path:"/personalCenter/myLaunch",query:{active:1}})}):e.$dialog.alert({message:i.message});case 4:case"end":return a.stop()}},a,e)}))()}}}),f={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"RecipientsInfo"},[2==t.item.auditStatus?a("aside",{staticClass:"tip"},[a("img",{staticClass:"warning",attrs:{src:t.warning,alt:""}}),t._v(" "),a("span",[t._v(t._s(t.item.auditDesc))])]):t._e(),t._v(" "),a("gradeName",{attrs:{selectGrade:t.selectGrade},on:{cancelSelect:t.cancelSelect,confirmSelect:t.confirmSelect}}),t._v(" "),a("section",{staticClass:"top_info"},[a("aside",[a("div",{staticClass:"photo"},[a("span",[t._v("头像")]),t._v(" "),a("div",[a("van-uploader",{attrs:{name:"uploader","after-read":t.photoOnRead}},[t.photoStatus?a("div",{staticClass:"img"},[""!=t.item.photo?a("img",{style:{backgroundImage:"url("+t.item.photo+")"},attrs:{alt:""}}):a("van-loading",{attrs:{type:"spinner",color:"#1989fa"}})],1):a("i",[a("span",[t._v("上传头像")])])])],1)]),t._v(" "),a("div",[a("van-field",{attrs:{label:"姓名",placeholder:"请输入受助人姓名"},model:{value:t.item.name,callback:function(e){t.$set(t.item,"name",e)},expression:"item.name"}})],1),t._v(" "),a("div",[a("van-field",{attrs:{label:"身份证",placeholder:"请输入受助人身份证号"},on:{blur:t.idCardVerification},model:{value:t.item.cardId,callback:function(e){t.$set(t.item,"cardId",e)},expression:"item.cardId"}})],1),t._v(" "),a("div",[a("van-field",{attrs:{label:"年龄",placeholder:"根据身份证识别年龄",readonly:""},model:{value:t.item.age,callback:function(e){t.$set(t.item,"age",e)},expression:"item.age"}})],1),t._v(" "),a("div",{staticClass:"grade"},[a("span",[t._v("性别")]),t._v(" "),a("span",{class:"根据身份证识性别"==t.item.sexName?"in":"on"},[t._v(t._s(t.item.sexName))])]),t._v(" "),void 0!=t.auditStatus?a("div",{staticClass:"love"},[a("span",[t._v("爱心状况")]),t._v(" "),a("span",[a("van-rate",{attrs:{count:t.item.totalPeriods,icon:"like","void-icon":"like-o",size:20,color:"red","void-color":"red",readonly:""},model:{value:t.item.loveValue,callback:function(e){t.$set(t.item,"loveValue",e)},expression:"item.loveValue"}})],1)]):t._e(),t._v(" "),a("div",{staticClass:"grade",on:{click:t.selectG}},[a("span",[t._v("加入年级")]),t._v(" "),t.item.classNumber?a("span",{staticClass:"on"},[t._v(t._s(t.item.classNumber)+"年级")]):a("van-icon",{attrs:{name:"arrow-down"}})],1),t._v(" "),a("div",{staticClass:"grade",on:{click:t.selectAddress}},[a("span",[t._v("选择地址")]),t._v(" "),a("span",{class:"请选择地址"===t.item.region?"in":"on"},[t._v(t._s(t.item.region))])]),t._v(" "),a("div",[a("van-field",{attrs:{label:"详细地址",placeholder:"请输入详细地址"},model:{value:t.item.address,callback:function(e){t.$set(t.item,"address",e)},expression:"item.address"}})],1)]),t._v(" "),a("aside",{staticClass:"IdCard",staticStyle:{margin:"0rem 0","border-bottom":"10px solid #f7f7f7"}},[a("p",{staticStyle:{padding:"0.45rem","font-size":"0.4rem",color:"#333"}},[t._v("上传受助人身份证照片或者户口本照片")]),t._v(" "),a("div",[a("div",[a("div",[a("van-uploader",{attrs:{name:"uploader","after-read":t.onRead}},[t.positivePicState?a("div",[""!=t.positivePic?a("img",{style:{backgroundImage:"url("+t.positivePic+")"},attrs:{alt:""}}):a("van-loading",{attrs:{type:"spinner",color:"#1989fa"}})],1):a("van-icon",{attrs:{name:"photograph"}})],1)],1),t._v(" "),a("p",[t._v("身份证正面或者户口本首页")])]),t._v(" "),a("div",[a("div",[a("van-uploader",{attrs:{name:"uploader","after-read":t.Read}},[t.againstPicState?a("div",[""!=t.againstPic?a("img",{style:{backgroundImage:"url("+t.againstPic+")"},attrs:{alt:""}}):a("van-loading",{attrs:{type:"spinner",color:"#1989fa"}})],1):a("van-icon",{attrs:{name:"photograph"}})],1)],1),t._v(" "),a("p",[t._v("身份证反面或户口本本人页")])])])]),t._v(" "),a("aside",[a("div",[a("div",{staticClass:"infoTop",staticStyle:{"border-bottom":"5px solid #f9f9f9"}},[a("div",{staticClass:"textarea"},[a("van-field",{attrs:{label:"家庭情况",type:"textarea",placeholder:"请描述受助人家庭详细情况，上传照片更有公信力!",rows:"1",autosize:""},model:{value:t.item.family,callback:function(e){t.$set(t.item,"family",e)},expression:"item.family"}}),t._v(" "),a("span",[t._v("（200字/500字）")])],1),t._v(" "),a("div",{attrs:{id:"morePic"}},[a("div",{staticClass:"Pic"},[t._l(t.familyPicMore,function(e,i){return a("div",{key:i},[a("van-icon",{attrs:{name:"cross"},on:{click:function(a){return t.deletePic({index:i,photoUrl:e,familyStatus:1})}}}),t._v(" "),a("span",{staticClass:"img",style:{backgroundImage:"url("+e+")",backgroundSize:"cover"},on:{click:function(a){return t.seeBigTu(e,t.familyPicMore)}}})],1)}),t._v(" "),t.loadingStatus?[a("div",[a("div",{staticClass:"loading"},[a("van-loading",{attrs:{type:"spinner",color:"#1989fa"}})],1)])]:t._e()],2),t._v(" "),3!==t.familyPicMore.length&&3!==t.familyLength.length?a("div",{staticClass:"van-uploader"},[a("div",{staticClass:"upload_warp_left",on:{click:t.fileClick}},[a("button",{staticClass:"btn btn-success"})]),t._v(" "),a("input",{attrs:{type:"file",multiple:"",id:"file",accept:"image/*"},on:{change:t.tirggerFile}}),t._v(" "),a("div",[a("van-icon",{attrs:{name:"photograph"}})],1)]):t._e()]),t._v(" "),a("p",{staticClass:"third"},[t._v("照片上传只限三张，请谨慎选择！")])]),t._v(" "),a("div",{staticClass:"infoTop"},[a("div",{staticClass:"textarea"},[a("van-field",{attrs:{label:"学习情况",type:"textarea",placeholder:"请描述受助人学习详细情况，上传照片更有公信力!",autosize:{minRows:3,maxRows:15}},model:{value:t.item.learn,callback:function(e){t.$set(t.item,"learn",e)},expression:"item.learn"}}),t._v(" "),a("span",[t._v("（200字/500字）")])],1),t._v(" "),a("div",{attrs:{id:"morePic"}},[a("div",{staticClass:"Pic"},[t._l(t.stydyPicMore,function(e,i){return a("div",{key:i},[a("van-icon",{attrs:{name:"cross"},on:{click:function(a){return t.deletePic({index:i,photoUrl:e,familyStatus:2})}}}),t._v(" "),a("span",{staticClass:"img",style:{backgroundImage:"url("+e+")",backgroundSize:"cover"},on:{click:function(a){return t.seeBigTu(e,t.stydyPicMore)}}})],1)}),t._v(" "),t.studyloadingStatus?[a("div",[a("div",{staticClass:"loading"},[a("van-loading",{attrs:{type:"spinner",color:"#1989fa"}})],1)])]:t._e()],2),t._v(" "),3!==t.stydyPicMore.length&&3!==t.studyLength.length?a("div",{staticClass:"van-uploader"},[a("div",{staticClass:"upload_warp_left",on:{click:t.studyfileClick}},[a("button",{staticClass:"btn btn-success"})]),t._v(" "),a("input",{attrs:{type:"file",multiple:"",id:"studyfile",accept:"image/*"},on:{change:t.studyTirggerFile}}),t._v(" "),a("div",[a("van-icon",{attrs:{name:"photograph"}})],1)]):t._e()]),t._v(" "),a("p",{staticClass:"third"},[t._v("照片上传只限三张，请谨慎选择！")])])])])]),t._v(" "),a("footer",[a("button",{directives:[{name:"intervalclick",rawName:"v-intervalclick",value:{func:t.dataClick,time:2e3},expression:"{func:dataClick,time:2000,}"}],staticClass:"sumbit_btn"},[t._v("提交")])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.areaStatus,expression:"areaStatus"}],staticClass:"area"},[a("van-area",{attrs:{"area-list":t.areaList},on:{confirm:t.confirm,cancel:t.cancel}})],1)],1)},staticRenderFns:[]};var g=a("C7Lr")(p,f,!1,function(t){a("/zhU"),a("nHNL")},"data-v-cecb004a",null);e.default=g.exports},QcOD:function(t,e,a){t.exports=a.p+"static/img/warning.4fe4d7b.png"},nHNL:function(t,e){}});