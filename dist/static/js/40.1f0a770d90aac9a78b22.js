webpackJsonp([40],{"6chr":function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=t("lC5x"),i=t.n(r),s=t("J0Oq"),n=t.n(s),o=t("pa6O"),c=t("gyMJ"),l=t("p6jS"),d=t("bjyp"),u=(t("w3CS"),t("cfGD")),p=t("telf"),v=t("VKKs"),m={data:function(){return{areaList:p.a,item:{region:"",name:"",cardId:"",age:"",address:"",urls:[],photo:""}}},mixins:[l.a,u.a,d.a],components:{gradeName:o.a},mounted:function(){var e=v.a.get("recipuentsInfo");e&&(this.item=e,this.photoStatus=!0,this.positivePicState=!0,this.againstPicState=!0,this.positivePic=this.item.urls[0],this.againstPic=this.item.urls[1])},methods:{nextStep:function(){this.item.urls=[this.positivePic,this.againstPic],this.testIdCard(this.item)},testIdCard:function(e){var a=this;return n()(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log(e),""!==e.photo){t.next=4;break}return a.$dialog.alert({message:"请上传头像"}),t.abrupt("return",!1);case 4:if(""!==e.grade){t.next=7;break}return a.$dialog({message:"请选择年级"}),t.abrupt("return",!1);case 7:if("请选择地区"!==e.area){t.next=10;break}return a.$dialog({message:"请选择地址"}),t.abrupt("return",!1);case 10:if(!(e.urls.length<2||null==e.urls[1]||""==e.urls[1]||null==e.urls[0]||""==e.urls[0])){t.next=13;break}return a.$dialog({message:"请上传身份证图片"}),t.abrupt("return",!1);case 13:if(!(e.age<6||e.age>18)){t.next=16;break}return a.$dialog({message:"年龄不在合理范围内"}),t.abrupt("return",!1);case 16:if(""!==e.address){t.next=19;break}return a.$dialog({message:"详细地址不能为空"}),t.abrupt("return",!1);case 19:a.verification(e);case 20:case"end":return t.stop()}},t,a)}))()},verification:function(e){var a=this;return n()(i.a.mark(function t(){var r;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.a.paymenInformation(e);case 2:200===(r=t.sent).code?(v.a.set("recipuentsInfo",e),a.$router.push({path:"/index/buyer",query:{recipientsId:r.data.recipientsId}})):a.$dialog.alert({message:r.message});case 4:case"end":return t.stop()}},t,a)}))()}}},g={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"page-index"},[t("gradeName",{attrs:{selectGrade:e.selectGrade},on:{cancelSelect:e.cancelSelect,confirmSelect:e.confirmSelect}}),e._v(" "),t("div",{staticClass:"recipient_form"},[t("div",{staticClass:"photo"},[t("span",[e._v("头像")]),e._v(" "),t("div",[t("van-uploader",{attrs:{name:"uploader","after-read":e.photoOnRead}},[e.photoStatus?t("div",{staticClass:"img"},[""!=e.item.photo?t("img",{style:{backgroundImage:"url("+e.item.photo+")",backgroundSize:"cover"},attrs:{alt:""}}):t("van-loading",{attrs:{type:"spinner",color:"#1989fa"}})],1):t("i",[t("span",[e._v("上传头像")])])])],1)]),e._v(" "),t("van-cell-group",[t("van-field",{attrs:{label:"姓名",placeholder:"请输入真实姓名"},model:{value:e.item.name,callback:function(a){e.$set(e.item,"name","string"==typeof a?a.trim():a)},expression:"item.name"}}),e._v(" "),t("van-field",{attrs:{label:"身份证号",placeholder:"请输入15位或者18位身份证号"},on:{blur:e.idCardVerifications},model:{value:e.item.cardId,callback:function(a){e.$set(e.item,"cardId","string"==typeof a?a.trim():a)},expression:"item.cardId"}}),e._v(" "),t("van-field",{attrs:{label:"年龄",placeholder:"根据身份证识别年龄",type:"number",readonly:"",id:"age"},model:{value:e.item.age,callback:function(a){e.$set(e.item,"age",a)},expression:"item.age"}})],1),e._v(" "),t("p",{staticClass:"gradeSelect",on:{click:e.selectG}},[t("span",[e._v("加入年级")]),e._v(" "),""===e.item.grade?t("span"):t("span",[e._v(e._s(e.item.gradexIndex)+"年级")]),e._v(" "),""===e.item.grade?t("van-icon",{attrs:{name:"arrow-down"}}):e._e()],1),e._v(" "),t("p",[t("span",[e._v("地区")]),e._v(" "),t("span",{class:"请选择地区"===e.item.area?"on":"in",on:{click:e.selectAddress}},[e._v(e._s(e.item.area))])]),e._v(" "),t("van-field",{attrs:{label:"详细地址",placeholder:"请输入详细地址"},model:{value:e.item.address,callback:function(a){e.$set(e.item,"address","string"==typeof a?a.trim():a)},expression:"item.address"}}),e._v(" "),t("div",{staticClass:"IdCard"},[t("p",[e._v("上传受助人身份证或户口本照片")]),e._v(" "),t("div",[t("div",[t("div",[t("van-uploader",{attrs:{name:"uploader","after-read":e.onRead}},[e.positivePicState?t("div",[""!=e.positivePic?t("img",{style:{backgroundImage:"url("+e.positivePic+")",backgroundSize:"cover"},attrs:{alt:""}}):t("van-loading",{attrs:{type:"spinner",color:"#1989fa"}})],1):t("van-icon",{attrs:{name:"photograph"}})],1)],1),e._v(" "),t("p",[e._v("身份证正面或户口本首页")])]),e._v(" "),t("div",[t("div",[t("van-uploader",{attrs:{name:"uploader","after-read":e.Read}},[e.againstPicState?t("div",[""!=e.againstPic?t("img",{style:{backgroundImage:"url("+e.againstPic+")",backgroundSize:"cover"},attrs:{alt:""}}):t("van-loading",{attrs:{type:"spinner",color:"#1989fa"}})],1):t("van-icon",{attrs:{name:"photograph"}})],1)],1),e._v(" "),t("p",[e._v("身份证反面或户口本本人页")])])])])],1),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.areaStatus,expression:"areaStatus"}],staticClass:"area"},[t("van-area",{attrs:{"area-list":e.areaList},on:{confirm:e.confirm,cancel:e.cancel}})],1),e._v(" "),t("div",{staticClass:"recipient_footer"},[t("van-button",{attrs:{type:"primary"},on:{click:e.nextStep}},[e._v("下一步")])],1)],1)},staticRenderFns:[]};var f=t("C7Lr")(m,g,!1,function(e){t("Ro+/")},"data-v-3dabc7b5",null);a.default=f.exports},"Ro+/":function(e,a){}});